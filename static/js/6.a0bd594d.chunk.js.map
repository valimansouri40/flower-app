{"version":3,"sources":["continar/form/form.css","continar/form/form.js"],"names":["module","exports","connect","state","token","auth","loading","order","err","error","person","card","flowers","get","dispatch","onorderpost","data","action","props","useState","fristName","elementtype","type","placeholder","elementvalid","require","maxlength","minlength","value","isvalid","touch","lastName","addres","phoneNumber","authform","setauthform","anabel","setanabel","ordervalidation","rules","valid","required","trim","length","isEmail","test","isNumeric","pusher","key","push","id","ctf","validation","classes","auth_input","i","ie","some","formis","className","form","map","is","onChange","event","inputkey","updatearr","updateObject","target","validi","changrhandler","onClick","orderFlowers","filter","mp","maporder","mi","price","name","address","history","showAlert","disabled","sineup","e","som"],"mappings":"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","file":"static/js/6.a0bd594d.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"auth\":\"form_auth_14Gwa\",\"form\":\"form_form_1-sCb\",\"auth_input\":\"form_auth_input_2qf_7\",\"sineup\":\"form_sineup_2yZwh\",\"valid\":\"form_valid_3nUs9\",\"sinein\":\"form_sinein_1_EQB\"};","import React,{useState,useEffect} from 'react';\r\nimport classes from './form.css';\r\nimport {connect} from 'react-redux';\r\nimport {updateObject} from '../../store/action/spread';\r\nimport * as action from '../../store/action/index';\r\nimport { showAlert } from '../../store/action/Alert';\r\nconst Auth=(props)=>{\r\n    const [authform, setauthform]=useState({\r\n        fristName:{\r\n            elementtype:{\r\n                type:'name',\r\n                placeholder: 'fristName'\r\n            },\r\n            elementvalid:{\r\n                require:true,\r\n                maxlength:20,\r\n                minlength: 4\r\n            },\r\n            value:'',\r\n            isvalid: false,\r\n            touch:false\r\n        },\r\n        lastName:{\r\n            elementtype:{\r\n                type:'name',\r\n                placeholder: 'lastName'\r\n            },\r\n            elementvalid:{\r\n                require:true,\r\n                maxlength:20,\r\n                minlength: 3\r\n            },\r\n            value:'',\r\n            isvalid: false,\r\n            touch:false\r\n        },\r\n        addres:{\r\n            elementtype:{\r\n                type:'text',\r\n                placeholder: 'addres'\r\n            },\r\n            elementvalid:{\r\n                require:true,\r\n                maxlength:400,\r\n                minlength: 9\r\n            },\r\n            value:'',\r\n            isvalid: false,\r\n            touch:false\r\n        },\r\n        phoneNumber:{\r\n            elementtype:{\r\n                type:'password',\r\n                placeholder: 'PhoneNumber'\r\n            },\r\n            elementvalid:{\r\n                require:true,\r\n                maxlength:13,\r\n                minlength: 8,\r\n                \r\n            },\r\n            value:'',\r\n            isvalid: false,\r\n            touch:false,\r\n            \r\n        },\r\n        \r\n    });\r\n    const [anabel, setanabel]=useState(false)\r\n   \r\n    const changrhandler=(event, inputkey)=>{\r\n        const updatearr= updateObject(authform,{\r\n            [inputkey]:updateObject(authform[inputkey],{\r\n                value: event.target.value,\r\n                isvalid: ordervalidation(event.target.value, authform[inputkey].elementvalid),\r\n                touch:true,\r\n               \r\n            })\r\n        })\r\n      \r\n        \r\n        setauthform(updatearr)\r\n        let validi=true;\r\n        for(let key in authform){\r\n            validi= authform[key].isvalid && validi\r\n        }\r\n        setanabel(validi)\r\n    }\r\n  const  ordervalidation = (value , rules)=>{\r\n        let valid  = true;\r\n        if(!rules){\r\n            return true;\r\n        }\r\n        if(rules.required){\r\n            valid = value.trim() !== '' && valid;\r\n        }\r\n        if(rules.maxlength){\r\n            valid = value.length <= rules.maxlength && valid;\r\n        }\r\n        if(rules.minlength){\r\n            valid = value.length >= rules.minlength && valid;\r\n        }\r\n        \r\n    if (rules.isEmail) {\r\n        const pattern = /[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/;\r\n        valid = pattern.test(value) && valid\r\n    }\r\n    \r\n    if (rules.isNumeric) {\r\n        const pattern = /^\\d+$/;\r\n        valid = pattern.test(value) && valid\r\n    }\r\n       return valid;\r\n    }\r\n    //const [issineup, setsineup]=useState(false);\r\n    const pusher=[];\r\n    for(let key in authform){\r\n        pusher.push({\r\n            id:key,\r\n            ctf:authform[key],\r\n        \r\n        })\r\n    }\r\n    const validation=[classes.auth_input]\r\n    if(authform.isvalid && authform.touch){\r\n        validation.push(classes.valid)\r\n    }\r\n    let frm=[];\r\n        for(let i in authform){\r\n            frm= authform[i].value;\r\n            \r\n        }\r\n        let somefrm= [];\r\n        for(let ie in props.person){\r\n            if(props.person[ie].some !== 0){\r\n            frm= props.person[ie].some\r\n            }\r\n        }\r\n        \r\n        \r\n    const submithandller=()=>{\r\n        \r\n        const orderFlowers= props.flowers.filter(mp=> mp.some > 0)\r\n        \r\n        const maporder= orderFlowers.map(mi=>{\r\n            return {price: mi.price, some:mi.some, name: mi.name, id: mi.id};\r\n        })\r\n      \r\n        const data= {\r\n            phoneNumber:authform.phoneNumber.value,\r\n            address: authform.addres.value,\r\n            lastName: authform.lastName.value,\r\n            fristName: authform.fristName.value,\r\n            order: maporder\r\n        }\r\n        if(orderFlowers.length > 0){\r\n            props.onorderpost(data);\r\n            \r\n        }else{\r\n            props.history.push('/');\r\n            showAlert('fail', 'not record order!')\r\n        }\r\n    }\r\n   \r\n  \r\n    \r\n    const formis=(<div className={classes.form}>\r\n    {pusher.map(is=>(\r\n        \r\n        <input className={[is.ctf.isvalid?classes.auth_input: classes.valid && !is.ctf.touch?classes.auth_input : classes.valid]}\r\n         key={is.id} {...is.ctf.elementtype}  {...is.ctf.value} onChange={(event)=>changrhandler(event, is.id)}/>\r\n    ))}<button onClick={submithandller} disabled={!anabel} className={classes.sineup}  >ثبت</button></div>);\r\n  \r\n   let orderlength=null;\r\n   if(props.flowers){\r\n       orderlength= props.flowers.filter(e=> e.som >= 1);\r\n       \r\n   }\r\n  \r\n    return(\r\n        <div className={classes.auth} >\r\n            \r\n            {formis}\r\n        </div>\r\n    );\r\n};\r\nconst mapstatetoprops =state=>{\r\n    return{\r\n        token: state.auth.token,\r\n        loading: state.order.loading,\r\n        err:state.order.error,\r\n        person: state.card.person,\r\n        order: state.order.order,\r\n        flowers: state.get.flowers\r\n    }\r\n}\r\nconst mapdispatchtoprops=dispatch=>{\r\n    return{\r\n      onorderpost: (data)=> dispatch(action.postinitorder(data))\r\n    }\r\n}\r\nexport default connect(mapstatetoprops,mapdispatchtoprops)(Auth);"],"sourceRoot":""}